<!DOCTYPE html>
<html lang="it">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Carrello - Shop Piante</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
   <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
   <!-- Stile per lo scroll del carrello -->
   <style>
        
       .lista-carrello-container {
           max-height: 450px;
           overflow-y: auto;
           scrollbar-width: thin;
           scrollbar-color: #6c757d #f8f9fa;
       }

       .lista-carrello-container::-webkit-scrollbar {
           width: 8px;
       }

       .lista-carrello-container::-webkit-scrollbar-track {
           background: #f8f9fa;
       }

       .lista-carrello-container::-webkit-scrollbar-thumb {
           background-color: #6c757d;
           border-radius: 4px;
       }
   </style>
</head>
<body>
   <!-- Navbar -->
   <nav class="navbar navbar-expand-lg navbar-light bg-light no-print">
    <div class="container">
        <a class="navbar-brand" href="../index.html">Shop Piante</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="../index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="./carrello.html">Carrello</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

   <!-- Contenuto principale -->
   <main class="container py-4" role="main">
       <div class="row">
           <div class="col-12">
               <h1 class="mb-4">Il tuo carrello</h1>
           </div>
       </div>

       <!-- Lista carrello con scroll -->
       <div class="row mb-4">
           <div class="col-12">
               <div class="card">
                   <div class="card-body">
                       <div class="lista-carrello-container">
                           <ul id="listaCarrello" class="list-group list-group-flush">
                               <!-- Il contenuto del carrello verrà inserito qui -->
                           </ul>
                       </div>
                   </div>
               </div>
           </div>
       </div>

       <div id="checkoutSection" class="row">
           <div class="col-md-8">
               <div class="card">
                   <div class="card-body">
                       <h3 class="card-title mb-4">Dati per l'acquisto</h3>
                       <button type="button" class="btn btn-primary" id="btnProcediCheckout">
                        <i class="fas fa-shopping-cart me-2"></i>Procedi al pagamento
                    </button>
                   </div>
               </div>
           </div>

           <div class="col-md-4 mt-4 mt-md-0">
               <div class="card">
                   <div class="card-body">
                       <h3 class="card-title">Riepilogo ordine</h3>
                       <button id="mostraRiepilogo" class="btn btn-outline-primary mb-3">
                        <i class="fas fa-receipt me-2"></i>Mostra dettaglio ordine
                    </button>

                       <div id="totaleCarrello" class="mt-3">
                           <div class="d-flex justify-content-between mb-2">
                               <span>Subtotale:</span>
                               <span class="subtotale">€ 0.00</span>
                           </div>
                           <div class="d-flex justify-content-between mb-2">
                               <span>IVA (22%):</span>
                               <span class="iva">€ 0.00</span>
                           </div>
                           <hr>
                           <div class="d-flex justify-content-between fw-bold">
                               <span>Totale:</span>
                               <span class="totale">€ 0.00</span>
                           </div>
                       </div>
                   </div>
               </div>
           </div>
       </div>
   </main>

   <!-- Modal Riepilogo -->
   <div class="modal fade" id="riepilogoModal" tabindex="-1">
       <div class="modal-dialog">
           <div class="modal-content">
               <div class="modal-header">
                   <h5 class="modal-title">Riepilogo Ordine</h5>
                   <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
               </div>
               <div class="modal-body">
               </div>
               <div class="modal-footer">
                   <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Chiudi</button>
               </div>
           </div>
       </div>
   </div>

   <!-- Modal Checkout -->
   <div class="modal fade" id="modalCheckout" tabindex="-1">
       <div class="modal-dialog modal-lg">
           <div class="modal-content">
               <div class="modal-header">
                   <h5 class="modal-title">Completa l'acquisto</h5>
                   <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
               </div>
               <div class="modal-body">
                   <form id="formCheckout" class="needs-validation" novalidate>
                       <h6>Dati Personali</h6>
                       <div class="row">
                           <div class="col-md-6 mb-3">
                               <label for="inputNome" class="form-label">Nome</label>
                               <input type="text" class="form-control" id="inputNome" name="nome" required minlength="3">
                               <div class="invalid-feedback">
                                   Inserisci un nome valido (minimo 3 caratteri)
                               </div>
                           </div>
                           <div class="col-md-6 mb-3">
                               <label for="inputCognome" class="form-label">Cognome</label>
                               <input type="text" class="form-control" id="inputCognome" name="cognome" required minlength="3">
                               <div class="invalid-feedback">
                                   Inserisci un cognome valido (minimo 3 caratteri)
                               </div>
                           </div>
                       </div>

                       <div class="mb-3">
                           <label for="inputEmail" class="form-label">Email</label>
                           <input type="email" class="form-control" id="inputEmail" name="email" required>
                           <div class="invalid-feedback">
                               Inserisci un indirizzo email valido
                           </div>
                       </div>

                       <div class="mb-3">
                           <label for="inputTelefono" class="form-label">Telefono</label>
                           <input type="tel" class="form-control" id="inputTelefono" name="telefono" required pattern="[0-9]{10}">
                           <div class="invalid-feedback">
                               Inserisci un numero di telefono valido (10 cifre)
                           </div>
                       </div>

                       <h6 class="mt-4">Modalità di Consegna</h6>
                       <div class="mb-3">
                           <select class="form-select" id="selectConsegna" name="modalitaConsegna" required>
                               <option value="">Seleziona modalità di consegna</option>
                               <option value="spedizione">Spedizione a domicilio</option>
                               <option value="ritiro">Ritiro in negozio</option>
                           </select>
                           <div class="invalid-feedback">
                               Seleziona una modalità di consegna
                           </div>
                       </div>

                       <div id="datiSpedizione" class="d-none">
                           <div class="row">
                               <div class="col-md-8 mb-3">
                                   <label for="inputVia" class="form-label">Via</label>
                                   <input type="text" class="form-control" id="inputVia" name="via">
                                   <div class="invalid-feedback">
                                       Inserisci la via
                                   </div>
                               </div>
                               <div class="col-md-4 mb-3">
                                   <label for="inputCivico" class="form-label">Numero Civico</label>
                                   <input type="text" class="form-control" id="inputCivico" name="civico">
                                   <div class="invalid-feedback">
                                       Inserisci il numero civico
                                   </div>
                               </div>
                           </div>
                           <div class="row">
                               <div class="col-md-4 mb-3">
                                   <label for="inputCap" class="form-label">CAP</label>
                                   <input type="text" class="form-control" id="inputCap" name="cap">
                                   <div class="invalid-feedback">
                                       CAP non valido
                                   </div>
                               </div>
                               <div class="col-md-4 mb-3">
                                   <label for="inputCitta" class="form-label">Città</label>
                                   <input type="text" class="form-control" id="inputCitta" name="citta">
                                   <div class="invalid-feedback">
                                       Inserisci la città
                                   </div>
                               </div>
                               <div class="col-md-4 mb-3">
                                   <label for="inputProvincia" class="form-label">Provincia</label>
                                   <input type="text" class="form-control" id="inputProvincia" name="provincia">
                                   <div class="invalid-feedback">
                                       Provincia non valida
                                   </div>
                               </div>
                           </div>
                       </div>

                       <h6 class="mt-4">Metodo di Pagamento</h6>
                       <div class="mb-3">
                           <select class="form-select" id="selectPagamento" name="metodoPagamento" required>
                               <option value="">Seleziona un metodo di pagamento</option>
                               <option value="CC">Carta di Credito</option>
                               <option value="PP">PayPal</option>
                               <option value="SP">StaysPay</option>
                           </select>
                           <div class="invalid-feedback">
                               Seleziona un metodo di pagamento
                           </div>
                       </div>

                       <div id="datiCartaCredito" class="d-none">
                           <div class="mb-3">
                               <label for="inputNumeroCarta" class="form-label">Numero Carta</label>
                               <input type="text" class="form-control" id="inputNumeroCarta" name="numeroCarta">
                               <div class="invalid-feedback">
                                   Numero carta non valido
                               </div>
                           </div>
                           <div class="row">
                               <div class="col-md-6 mb-3">
                                   <label for="inputScadenza" class="form-label">Scadenza (MM/AA)</label>
                                   <input type="text" class="form-control" id="inputScadenza" name="scadenza">
                                   <div class="invalid-feedback">
                                       Formato scadenza non valido
                                   </div>
                               </div>
                               <div class="col-md-6 mb-3">
                                   <label for="inputCvv" class="form-label">CVV</label>
                                   <input type="text" class="form-control" id="inputCvv" name="cvv">
                                   <div class="invalid-feedback">
                                       CVV non valido
                                   </div>
                               </div>
                           </div>
                       </div>

                       <!-- Checkbox modificato per i termini e condizioni -->
                       <div class="mb-3 form-check">
                           <input class="form-check-input" type="checkbox" id="accettaTermini" required>
                           <label class="form-check-label" for="accettaTermini">
                               Accetto i <a href="#" data-bs-toggle="modal" data-bs-target="#terminieCondizioniModal">termini e le condizioni</a>
                           </label>
                           <div class="invalid-feedback">
                               Devi accettare i termini e le condizioni
                           </div>
                       </div>
                   </form>
               </div>
               <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-2"></i>Annulla
                </button>
                <button type="button" class="btn btn-primary" id="btnConfermaAcquisto">
                    <i class="fas fa-check me-2"></i>Conferma Acquisto
                </button>
               </div>
           </div>
       </div>
   </div>

   <!-- Modal Termini e Condizioni -->
   <div class="modal fade" id="terminieCondizioniModal" tabindex="-1">
       <div class="modal-dialog modal-lg">
           <div class="modal-content">
               <div class="modal-header">
                   <h5 class="modal-title">Termini e Condizioni</h5>
                   <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
               </div>
               <div class="modal-body">
                   <h6>Trattamento dei Dati Personali</h6>
                   <p>Ai sensi del Regolamento UE 2016/679 (GDPR), i dati personali forniti saranno trattati per:</p>
                   <ul>
                       <li>Elaborazione e gestione degli ordini</li>
                       <li>Comunicazioni relative alla consegna</li>
                       <li>Assistenza clienti</li>
                       <li>Adempimenti fiscali e legali</li>
                   </ul>

                   <h6>Conservazione dei Dati</h6>
                   <p>I dati verranno conservati per il tempo necessario all'erogazione dei servizi richiesti e per gli adempimenti di legge.</p>

                   <h6>Diritti dell'Interessato</h6>
                   <p>L'utente ha il diritto di:</p>
                   <ul>
                       <li>Accedere ai propri dati personali</li>
                       <li>Richiederne la rettifica o la cancellazione</li>
                       <li>Limitarne il trattamento</li>
                       <li>Opporsi al trattamento</li>
                       <li>Richiedere la portabilità dei dati</li>
                   </ul>

                   <h6>Modalità di Pagamento e Sicurezza</h6>
                   <p>Tutte le transazioni sono protette con sistemi di crittografia. I dati delle carte di credito non vengono memorizzati nei nostri sistemi.</p>

                   <h6>Consegna e Resi</h6>
                   <p>La consegna viene effettuata entro 3-5 giorni lavorativi. È possibile effettuare il reso entro 14 giorni dalla ricezione del prodotto.</p>
               </div>
               <div class="modal-footer">
                   <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Chiudi</button>
               </div>
           </div>
       </div>
   </div>

    <!-- Footer -->
    <footer class="container py-4">
        <div class="row">
            <div class="col-12 text-center">
                <p class="mb-0">© 2024 Shop Piante - Tutti i diritti riservati</p>
            </div>
        </div>
    </footer>
   <!-- Script necessari -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
   <script src="../js/scriptCarrello.js" type="module"></script>
</body>
</html>